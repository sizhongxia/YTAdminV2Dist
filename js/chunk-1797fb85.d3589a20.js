(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1797fb85"],{"0758":function(t,e,o){"use strict";var a=o("9cf6"),r=o.n(a);r.a},"0d61":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Card",{staticClass:"search-con",attrs:{shadow:""}},[o("Form",{ref:"searchFormObj",attrs:{model:t.searchFormObj}},[o("Input",{staticClass:"search-input",attrs:{placeholder:"按课程名称查询",clearable:""},model:{value:t.searchFormObj.itemName,callback:function(e){t.$set(t.searchFormObj,"itemName",e)},expression:"searchFormObj.itemName"}}),t._v("  \n      "),o("Select",{staticStyle:{width:"180px"},attrs:{placeholder:"按课程展示状态查询",clearable:""},model:{value:t.searchFormObj.showStatus,callback:function(e){t.$set(t.searchFormObj,"showStatus",e)},expression:"searchFormObj.showStatus"}},[o("Option",{attrs:{value:""}},[t._v("全部")]),o("Option",{attrs:{value:"Y"}},[t._v("展示")]),o("Option",{attrs:{value:"N"}},[t._v("下线")])],1),t._v("  \n      "),o("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[o("Icon",{attrs:{type:"ios-search-outline"}}),t._v(" 检索")],1)],1)],1),o("Button",{staticStyle:{"margin-bottom":"18px"},attrs:{type:"primary",icon:"ios-add-circle-outline"},on:{click:t.showCreateForm}},[t._v("新增")]),o("Table",{attrs:{border:!1,stripe:!0,"show-header":!0,data:t.tableData,loading:t.loading||t.courseClassifyLoading,columns:t.columns,size:"default","highlight-row":!0,editable:""},on:{"on-sort-change":t.handleSortChange}}),o("div",{staticClass:"page"},[o("Page",{attrs:{total:t.total,current:t.searchFormObj.current,"page-size":t.searchFormObj.size,"show-sizer":"","show-total":"","show-elevator":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),o("Modal",{attrs:{title:""===t.formObj.resId?"新增":"修改",width:"960",scrollable:"",mask:"","mask-closable":!1,closable:!1,"class-name":"vertical-center-modal"},model:{value:t.baseFormModel,callback:function(e){t.baseFormModel=e},expression:"baseFormModel"}},[o("div",{staticStyle:{width:"100%",height:"420px",overflow:"auto","text-align":"left"}},[o("Form",{ref:"baseForm",attrs:{model:t.formObj,"label-width":120,rules:t.ruleValidate}},[o("Row",[o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"课程分类",prop:"classifyId"}},[o("Select",{staticStyle:{width:"320px"},model:{value:t.formObj.classifyId,callback:function(e){t.$set(t.formObj,"classifyId",e)},expression:"formObj.classifyId"}},t._l(t.courseClassifies,function(e){return o("Option",{key:e.resId,attrs:{value:e.resId}},[t._v(t._s(e.courseName))])}))],1)],1),o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"名称",prop:"itemName"}},[o("Input",{staticStyle:{width:"320px"},attrs:{placeholder:"请输入课程类别名称"},model:{value:t.formObj.itemName,callback:function(e){t.$set(t.formObj,"itemName",e)},expression:"formObj.itemName"}})],1)],1),o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"排序编号",prop:"sortNo"}},[o("Input",{staticStyle:{width:"320px"},attrs:{placeholder:"请输入课程排序编号"},model:{value:t.formObj.sortNo,callback:function(e){t.$set(t.formObj,"sortNo",e)},expression:"formObj.sortNo"}})],1)],1),o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"展示状态",placeholder:"请选择课程展示状态",prop:"showStatus"}},[o("Select",{staticStyle:{width:"320px"},attrs:{clearable:""},model:{value:t.formObj.showStatus,callback:function(e){t.$set(t.formObj,"showStatus",e)},expression:"formObj.showStatus"}},[o("Option",{attrs:{value:"Y"}},[t._v("展示")]),o("Option",{attrs:{value:"N"}},[t._v("下线")])],1)],1)],1),o("Col",{attrs:{span:"24"}},[o("FormItem",{attrs:{label:"封面图",prop:"coverPicUrl"}},[o("Input",{staticStyle:{width:"320px"},attrs:{placeholder:"请上传一张课程封面图",disabled:""},model:{value:t.formObj.coverPicUrl,callback:function(e){t.$set(t.formObj,"coverPicUrl",e)},expression:"formObj.coverPicUrl"}},[o("Button",{attrs:{slot:"append",icon:"ios-cloud-upload-outline"},on:{click:t.uploadIconUrl},slot:"append"},[t._v("上传")])],1)],1),o("div",{staticStyle:{"text-align":"center"}},[t.formObj.coverPicUrl?o("img",{staticStyle:{width:"260px","min-height":"60px",display:"block",margin:"10px auto"},attrs:{src:t.formObj.coverPicUrl},on:{click:function(e){t.showBigPictureModel(t.formObj.coverPicUrl)}}}):t._e()])],1),o("Col",{attrs:{span:"24"}},[o("FormItem",{attrs:{label:"内容介绍",prop:"courseContent"}},[o("editor",{ref:"editor",staticStyle:{width:"770px"},on:{"on-change":t.handleContentChange}})],1)],1)],1)],1),t.submiting?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:t.closeBaseFormHandle}},[t._v("关闭")]),o("Button",{attrs:{type:"primary"},on:{click:t.submitBaseFormHandle}},[t._v("提交")])],1)]),o("Modal",{attrs:{"footer-hide":!0},model:{value:t.uploadCoursePicModel,callback:function(e){t.uploadCoursePicModel=e},expression:"uploadCoursePicModel"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("上传图片")]),o("Upload",{attrs:{type:"drag",accept:".jpg,.png,.gif",multiple:!1,format:t.uploadFormat,headers:t.uploadHeaders,"before-upload":t.uploadPicBeforeHandle,"on-success":t.uploadPicSuccessHandle,"on-error":t.uploadPicErrorHandle,"on-format-error":t.uploadPicErrorFormatHandle,"on-exceeded-size":t.uploadPicErrorSizeHandle,"max-size":4096,"show-upload-list":!1,action:t.baseUrl+"upload"}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),o("p",[t._v("单击或拖动文件到此处上传")])],1),t.picUploading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1),o("Modal",{attrs:{"footer-hide":!0},model:{value:t.uploadDetailPicModel,callback:function(e){t.uploadDetailPicModel=e},expression:"uploadDetailPicModel"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("上传图片")]),o("Upload",{attrs:{type:"drag",accept:".jpg,.png,.gif",multiple:!1,format:t.uploadFormat,headers:t.uploadHeaders,"before-upload":t.uploadPicBeforeHandle,"on-success":t.uploadDetailPicSuccessHandle,"on-error":t.uploadPicErrorHandle,"on-format-error":t.uploadPicErrorFormatHandle,"on-exceeded-size":t.uploadPicErrorSizeHandle,"max-size":4096,"show-upload-list":!1,action:t.baseUrl+"upload"}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),o("p",[t._v("单击或拖动文件到此处上传")])],1),t.picUploading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),o("div",{attrs:{slot:"footer"},slot:"footer"})],1),o("Modal",{attrs:{draggable:"",width:"750","footer-hide":!0},model:{value:t.picModelVisible,callback:function(e){t.picModelVisible=e},expression:"picModelVisible"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("图片大图")]),t.picModelPicUrl?o("img",{staticStyle:{width:"100%"},attrs:{src:t.picModelPicUrl}}):t._e()]),o("Modal",{attrs:{draggable:"",width:"750","footer-hide":!0},model:{value:t.detailPicModel,callback:function(e){t.detailPicModel=e},expression:"detailPicModel"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("详情页图片列表")]),o("div",[o("Button",{staticStyle:{"margin-bottom":"18px"},attrs:{type:"primary",icon:"ios-add-circle-outline"},on:{click:t.showUploadDetailPicForm}},[t._v("上传新图片")])],1),o("Table",{attrs:{border:"",columns:t.detailPicColumns,data:t.detailPicLs,loading:t.loading}})],1),o("Modal",{attrs:{title:""===t.detailPicFormObj.resId?"新增":"修改",width:"960",scrollable:"",mask:"","mask-closable":!1,closable:!1,"class-name":"vertical-center-modal"},model:{value:t.detailPicFormModel,callback:function(e){t.detailPicFormModel=e},expression:"detailPicFormModel"}},[o("div",{staticStyle:{width:"100%",height:"220px",overflow:"auto","text-align":"left"}},[o("Form",{ref:"detailPicForm",attrs:{model:t.formObj,"label-width":120}},[o("Row",[o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"序号"}},[o("Input",{staticStyle:{width:"320px"},attrs:{placeholder:"请输入图片序号"},model:{value:t.detailPicFormObj.sortNo,callback:function(e){t.$set(t.detailPicFormObj,"sortNo",e)},expression:"detailPicFormObj.sortNo"}})],1)],1),o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"展示状态",placeholder:"请选择展示状态"}},[o("Select",{staticStyle:{width:"320px"},attrs:{clearable:""},model:{value:t.detailPicFormObj.showStatus,callback:function(e){t.$set(t.detailPicFormObj,"showStatus",e)},expression:"detailPicFormObj.showStatus"}},[o("Option",{attrs:{value:"Y"}},[t._v("展示")]),o("Option",{attrs:{value:"N"}},[t._v("下线")])],1)],1)],1),o("Col",{attrs:{span:"24"}},[o("FormItem",{attrs:{label:"图片"}},[o("Input",{staticStyle:{width:"320px"},attrs:{placeholder:"请上传一张图片",disabled:""},model:{value:t.detailPicFormObj.picUrl,callback:function(e){t.$set(t.detailPicFormObj,"picUrl",e)},expression:"detailPicFormObj.picUrl"}},[o("Button",{attrs:{slot:"append",icon:"ios-cloud-upload-outline"},on:{click:t.uploadDetailPicUrl},slot:"append"},[t._v("上传")])],1)],1),o("div",{staticStyle:{"text-align":"center"}},[t.detailPicFormObj.picUrl?o("img",{staticStyle:{width:"260px","min-height":"60px",display:"block",margin:"10px auto"},attrs:{src:t.detailPicFormObj.picUrl},on:{click:function(e){t.showBigPictureModel(t.detailPicFormObj.picUrl)}}}):t._e()])],1)],1)],1),t.submiting||t.loading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:t.closeDetailPicFormHandle}},[t._v("关闭")]),o("Button",{attrs:{type:"primary"},on:{click:t.submitDetailPicFormHandle}},[t._v("提交")])],1)])],1)},r=[],i=o("66df"),l=function(t){return i["a"].request({url:"course/list",data:t,method:"post"})},s=function(t){return i["a"].request({url:"course/upinsert",data:t,method:"post"})},c=function(t){var e={resId:t};return i["a"].request({url:"course/detail",data:e,method:"post"})},d=function(t){var e={resId:t};return i["a"].request({url:"course/detailPics",data:e,method:"post"})},n=function(t){return i["a"].request({url:"course/upinsertDetailPic",data:t,method:"post"})},u=function(t){var e={resId:t};return i["a"].request({url:"course/deleteDetailPic",data:e,method:"post"})},p=function(t){var e={resId:t};return i["a"].request({url:"course/delete",data:e,method:"post"})},m=o("485a"),h=o("f121"),f=o("a0f0"),b={data:function(){var t=this;return{searchFormObj:{current:1,size:10,orderField:"",orderType:"",itemName:"",showStatus:""},loading:!1,tableData:[],total:0,submiting:!1,formObj:{resId:"",classifyId:"",itemName:"",sortNo:"",coverPicUrl:"",showStatus:"",courseContent:""},baseFormModel:!1,deleting:!1,uploadCoursePicModel:!1,baseUrl:h["a"].baseUrl.pro,uploadFormat:["jpg","png","gif"],uploadHeaders:{type:"course"},picUploading:!1,picModelVisible:!1,picModelPicUrl:"",courseClassifyLoading:!1,courseClassifies:[],detailPicModel:!1,detailPicLs:[],detailPicColumns:[{title:" ",key:"action",width:180,fixed:"right",render:function(e,o){return e("div",[e("Button",{props:{type:"text"},on:{click:function(){t.showEditDetailPicForm(o)}}},"编辑"),e("Poptip",{props:{transfer:!0,confirm:!0,title:"确认要删除此记录吗？"},on:{"on-ok":function(){t.handleDeleteDetailPic(o)}}},[e("Button",{props:{type:"text",loading:t.deleting}},"删除")])])}},{title:"序号",key:"sortNo",width:60},{title:"图片地址",key:"picUrl"},{title:"显示状态",key:"showStatusTxt",width:100}],detailPicFormModel:!1,detailPicFormObj:{resId:"",courseId:"",sortNo:"",showStatus:"",picUrl:""},uploadDetailPicModel:!1}},components:{Editor:f["a"]},computed:{columns:function(){var t=this;return[{title:" ",key:"action",width:180,fixed:"right",render:function(e,o){return e("div",[e("Button",{props:{type:"text"},on:{click:function(){t.showEditForm(o)}}},"编辑"),e("Button",{props:{type:"text"},on:{click:function(){t.showDetailPicModel(o.row.resId)}}},"详情页图"),e("Poptip",{props:{transfer:!0,confirm:!0,title:"确认要删除此记录吗？"},on:{"on-ok":function(){t.handleDelete(o)}}},[e("Button",{props:{type:"text",loading:t.deleting}},"删除")])])}},{type:"index",width:60,align:"center"},{title:"名称",key:"itemName",minWidth:200,tooltip:!0},{title:"排序",key:"sortNo",sortable:"custom",minWidth:120,tooltip:!0},{title:"展示状态",key:"showStatus",sortable:"custom",minWidth:120,tooltip:!0},{title:"版本",key:"version",minWidth:80,tooltip:!0},{title:"创建时间",sortable:"custom",width:210,key:"createAt"},{title:"最后编辑时间",sortable:"custom",width:210,key:"updateAt"}]},ruleValidate:function(){return{itemName:[{required:!0,message:"课程名称不允许为空",trigger:"blur"}],sortNo:[{required:!0,message:"课程排序编号不允许为空",trigger:"blur"}],coverPicUrl:[{required:!0,message:"请上传一张课程封面图",trigger:"blur"}],showStatus:[{required:!0,message:"请选择课程展示状态",trigger:"change"}]}}},methods:{load:function(){var t=this;t.loading=!0,l(t.searchFormObj).then(function(e){if(t.loading=!1,200===e.status&&200===e.data.code){var o=e.data.data;t.tableData=o.list,t.total=o.total}}).catch(function(e){t.$Modal.error({title:e.message}),t.tableData=[],t.loading=!1})},handleSearch:function(t){this.load()},changePage:function(t){this.searchFormObj.current=t,this.load()},changePageSize:function(t){this.searchFormObj.size=t,this.load()},handleSortChange:function(t){this.searchFormObj.orderField=t.key,this.searchFormObj.orderType=t.order,this.load()},showCreateForm:function(){this.formObj={resId:"",classifyId:"",itemName:"",sortNo:"",coverPicUrl:"",showStatus:"",courseContent:""},this.$refs.editor.setHtml(""),this.baseFormModel=!0},showEditForm:function(t){var e=this;e.loading=!0,c(t.row.resId).then(function(t){e.loading=!1,200===t.status&&200===t.data.code&&(e.formObj=t.data.data,e.$refs.editor.setHtml(e.formObj.courseContent),e.baseFormModel=!0)}).catch(function(t){e.loading=!1,e.$Modal.error({title:t.message})})},submitBaseFormHandle:function(){var t=this;t.$refs["baseForm"].validate(function(e){e&&(t.submiting=!0,s(t.formObj).then(function(e){t.submiting=!1,200===e.status&&200===e.data.code?(t.closeBaseFormHandle(),t.load()):t.$Modal.error({title:e.data.message})}).catch(function(e){t.submiting=!1,t.closeBaseFormHandle(),t.$Modal.error({title:e.message})}))})},closeBaseFormHandle:function(){this.$refs["baseForm"].resetFields(),this.baseFormModel=!1},handleDelete:function(t){var e=this,o=this;o.deleting=!0,p(t.row.resId).then(function(t){o.deleting=!1,200===t.status&&200===t.data.code?e.load():o.$Modal.error({title:t.data.message})}).catch(function(t){o.deleting=!1,o.$Modal.error({title:t.message})})},handleContentChange:function(t){this.formObj.courseContent=t},showUploadDetailPicForm:function(){this.detailPicFormModel=!0},closeDetailPicFormHandle:function(){this.$refs["detailPicForm"].resetFields(),this.detailPicFormModel=!1},showDetailPicModel:function(t){var e=this;e.loading=!0,d(t).then(function(o){e.loading=!1,e.detailPicLs=o.data.data,e.detailPicModel=!0,e.detailPicFormObj={resId:"",courseId:t,sortNo:"",showStatus:"Y",picUrl:""}}).catch(function(t){e.loading=!1,e.$Modal.error({title:t.message})})},showEditDetailPicForm:function(t){var e=this;e.detailPicFormObj={resId:t.row.resId,courseId:t.row.courseId,sortNo:t.row.sortNo,showStatus:t.row.showStatus,picUrl:t.row.picUrl},e.detailPicFormModel=!0},submitDetailPicFormHandle:function(){var t=this;t.submiting=!0,n(t.detailPicFormObj).then(function(e){t.submiting=!1,200===e.status&&200===e.data.code?(t.showDetailPicModel(t.detailPicFormObj.courseId),t.closeDetailPicFormHandle()):t.$Modal.error({title:e.data.message})}).catch(function(e){t.submiting=!1,t.$Modal.error({title:e.message})})},handleDeleteDetailPic:function(t){var e=this,o=this;o.deleting=!0,u(t.row.resId).then(function(a){o.deleting=!1,200===a.status&&200===a.data.code?e.showDetailPicModel(t.row.courseId):o.$Modal.error({title:a.data.message})}).catch(function(t){o.deleting=!1,o.$Modal.error({title:t.message})})},uploadDetailPicUrl:function(){this.uploadDetailPicModel=!0},uploadDetailPicSuccessHandle:function(t,e){this.detailPicFormObj.picUrl=e.response.data,this.uploadDetailPicModel=!1,this.picUploading=!1},uploadIconUrl:function(){this.uploadCoursePicModel=!0},uploadPicBeforeHandle:function(){this.picUploading=!0},uploadPicSuccessHandle:function(t,e){this.formObj.coverPicUrl=e.response.data,this.uploadCoursePicModel=!1,this.picUploading=!1},uploadPicErrorHandle:function(t){var e=this;e.picUploading=!1,e.$Modal.error({title:"上传失败，请稍后重试"})},uploadPicErrorSizeHandle:function(t){var e=this;e.picUploading=!1,e.$Modal.error({title:"图片太大，请压缩后重试"})},uploadPicErrorFormatHandle:function(t,e){var o=this;o.picUploading=!1,o.$Modal.error({title:"图片格式错误"})},showBigPictureModel:function(t){this.picModelVisible=!0,this.picModelPicUrl=t}},mounted:function(){var t=this;t.load(),t.courseClassifyLoading=!0,Object(m["d"])().then(function(e){t.courseClassifyLoading=!1,200===e.status&&200===e.data.code?t.courseClassifies=e.data.data:t.$Modal.error({title:e.data.message})}).catch(function(e){t.courseClassifyLoading=!1,t.$Modal.error({title:e.message})})}},g=b,v=(o("0758"),o("2877")),P=Object(v["a"])(g,a,r,!1,null,null,null);e["default"]=P.exports},"485a":function(t,e,o){"use strict";o.d(e,"c",function(){return r}),o.d(e,"e",function(){return i}),o.d(e,"a",function(){return l}),o.d(e,"b",function(){return s}),o.d(e,"d",function(){return c});var a=o("66df"),r=function(t){return a["a"].request({url:"courseClassify/list",data:t,method:"post"})},i=function(t){return a["a"].request({url:"courseClassify/upinsert",data:t,method:"post"})},l=function(t){var e={resId:t};return a["a"].request({url:"courseClassify/detail",data:e,method:"post"})},s=function(t){var e={resId:t};return a["a"].request({url:"courseClassify/delete",data:e,method:"post"})},c=function(){var t={};return a["a"].request({url:"courseClassify/selectAll",data:t,method:"post"})}},"9cf6":function(t,e,o){}}]);